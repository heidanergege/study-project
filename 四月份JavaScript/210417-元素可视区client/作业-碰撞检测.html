<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .box {
            position: relative;
            width: 600px;
            height: 400px;
            border: 1px solid #000;
            margin: 100px auto;
        }

        .redbox {
            position: absolute;
            top: 0;
            left: 0;
            width: 50px;
            height: 50px;
            background-color: #ff0000;
        }
    </style>
</head>

<body><button>点击</button>
    <div class="box">
        <div class="redbox"></div>
    </div>
    <script>
        var redbox = document.querySelector('.redbox');
        var box = document.querySelector('.box');
        var button = document.querySelector('button');
        // offsetWidth 是包含边框的宽度
        // clientWidth 是不包含边框的宽度

        // redbox 可移动的最大距离
        var maxWidth = box.clientWidth - redbox.offsetWidth;
        var maxHeight = box.clientHeight - redbox.offsetHeight;

        // 记录left和top的变量
        var x = redbox.offsetLeft;
        var y = redbox.offsetTop;

        // 记录x 和 y 方向的速率
        var speedX = 2;
        var speedY = 2;

        console.log(x, y);
        // 定时器
        var timer = null;
        timer = setInterval(function () {
            x += speedX;
            y += speedY;
            // X方向
            if (x >= maxWidth) {
                speedX *= -1;
            } else if (x < 0) {
                speedX *= -1;
            }
            // Y方向
            if (y >= maxHeight) {
                speedY *= -1;
            } else if (y < 0) {
                speedY *= -1;
            }
            redbox.style.top = y + 'px';
            redbox.style.left = x + 'px';
        }, 10)
    </script>
</body>

</html>